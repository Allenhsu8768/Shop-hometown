
{# 繼承 index 模板 #}
{% extends 'index.html' %}

{# 設置 index 模板 可修改的樣式 css #}
{% block other_css %}
<!-- 引用外部 擺放 goods_main.css        -->
<link rel="stylesheet" type="text/css" href="/static/css/goods_main.css">
<!-- 引用外部 mobile_goods 樣式       -->
<link rel="stylesheet" type="text/css" href="/static/css/mobile_goods.css">

{# 加載 alery.js 自定義彈框 #}
<script src="/static/js/alert.js"></script>
{% endblock %}


{# 設置 woman 主頁 主體內容和 首頁修改#}
{% block wrapper_main %}
<!-- 用戶點選路徑        -->
<div id="goods_title">
    <a href="/Women">Women's</a>
</div>
<!-- Woman 商品主體 -->
<div id="goods_main">
<!-- =========== 類型列表 begin =============-->
    <div id="goods_main_type">
        <dl class="goods_list_dl">
            <dt class="goods_list_dt" onclick="New_arrival()">
                <a href="javascript:;" class="goods_change">New Arrival</a>
                <!-- 商品列表三角標    -->
                <div class="triangle"></div>
            </dt>
            <dd class="goods_list_dd" style="display: none" id="New_arrival_click_chirdren">
                <ul>
                    <li>
                        <a href="javascript:;" class="new_arrival">Coats & Jackets</a>
                    </li>
                    <li>
                        <a href="javascript:;" class="new_arrival">Clothes</a>
                    </li>
                    <li>
                        <a href="javascript:;" class="new_arrival">Trousers</a>
                    </li>
                    <li>
                        <a href="javascript:;" class="new_arrival">Blouse</a>
                    </li>
                </ul>
            </dd>
            <dt class="goods_list_dt" onclick="Top()">
                <a href="javascript:;" class="goods_change">Top</a>
                <!-- 商品列表三角標    -->
                <div class="triangle"></div>
            </dt>
            <dd class="goods_list_dd" style="display: none" id="Top_click_chirdren">
                <ul>
                    <li><a href="javascript:;" class="top">Coats & Jackets</a></li>
                    <li><a href="javascript:;" class="top">Clothes</a></li>
                    <li><a href="javascript:;" class="top">Trousers</a></li>
                    <li><a href="javascript:;" class="top">Blouse</a></li>
                </ul>
            </dd>
            <dt class="goods_list_dt" onclick="Coats_Jackets()">
                <a href="#" class="other_goods">Coats & Jackets</a>
            </dt>
            <dt class="goods_list_dt" onclick="Clothes()">
                <a href="#" class="other_goods">Clothes</a>
            </dt>
            <dt class="goods_list_dt" onclick="Trousers()">
                <a href="#" class="other_goods">Trousers</a>
            </dt>
            <dt class="goods_list_dt" onclick="Blouse()">
                <a href="#" class="other_goods">Blouse</a></dt>
        </dl>
        <hr style="width: 100%;color: #4b4747; margin-bottom: 15px;">
        <b>YOU CAN FILTER GOODS</b>
        <!--    user_filter_ goods            -->
        <div class="filter-wrapper">
            <div class="filter-container">
                <div class="filters">
                    <!-- 1. sort by -->
                    <div class="filters_to_goods_Sort">
                        <button id="sort_by">
                            <span class="h3">Sort By</span>
                            <div class="icon" style="float: right;">
                                <span class="filter_icon"></span>
                            </div>
                            <div class='user_filter_goods'>
                            </div>
                        </button>
                            <div class="sort_choose">
                                <form action="" method="post" id="sort_by_frm">
                                    <div class="radio-group">
                                        <input type='radio' name='goods_filter' class="radio_input" value="Best Match" id="1">
                                        <label for="1" class="radio-label"><span class="radio-button"></span><u>Best Match</u></label>
                                    </div>
                                    <div class="radio-group">
                                        <input type='radio' name='goods_filter' class="radio_input" value='LowtoHigh' id="2">
                                        <label for="2" class="radio-label"><span class="radio-button"></span><u>Price:Low to High</u></label>
                                    </div>
                                    <div class="radio-group">
                                        <input type='radio' name='goods_filter' class="radio_input" value='HightoLow' id="3">
                                        <label for="3" class="radio-label"><span class="radio-button"></span><u>Price:High to Low</u></label>
                                    </div>
                                    <div class="radio-group">
                                        <input type='radio' name='goods_filter' class="radio_input" value='Newest' id="4">
                                        <label for="4" class="radio-label"><span class="radio-button"></span><u>Newest</u></label>
                                    </div>
                                </form>
                            </div>
                    </div>
                    <!--  2. Size and Color                      -->
                    <div class="filters_to_goods">
                        <button id="size">
                            <span class="h3">Size</span>
                            <div class="icon" style="float: right;">
                                <span class="filter_icon"></span>
                            </div>
                            <div class='user_filter_goods'>
                            </div>
                        </button>
                        <div class="other_choose">
                            <!-- filter size -->
                            <ul class="size_ul">
                                <li>XXS</li>
                                <li>XS</li>
                                <li>S</li>
                                <li>M</li>
                                <li>L</li>
                                <li>XL</li>
                                <li>XXL</li>
                            </ul>
                        </div>
                    </div>
                    <!--  3. color                          -->
                    <div class="filters_to_goods">
                        <button id="color">
                            <span class="h3">Color</span>
                            <div class="icon" style="float: right;">
                                <span class="filter_icon"></span>
                            </div>
                            <div class='user_filter_goods'>
                            </div>
                        </button>
                        <div class="other_choose" style="height: 90px">
                            <!-- filter color -->
                            <ul class="color_ul">
                                <li>Black</li>
                                <li>Blue</li>
                                <li>Brown</li>
                                <li>Green</li>
                                <li>Grey</li>
                                <li>Orange</li>
                                <li>Red</li>
                                <li>White</li>
                                <li>Yellow</li>
                            </ul>
                        </div>
                    </div>
                    <!-- 4. clear filter -->
                    <div class="clear_all_filter" onclick="clear_filter()">
                        <button id="Clear-all-filter">Clear all filter</button>
                    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<!-- =========== 類型列表 end =============-->

<!-- user-cart-box , Your cart 樣式   ==================begin===============   -->
<div class="user-cart-box">
    <h4>Your Cart</h4>
<!--  設置購物車內的清單          -->
    <div class="user-cart-list" style="display:none;">
        {#  購物車商品清單      #}
        <div class="user_cart_goods">
            {#  加入 csrf_token 讓 post 通過請求 user_cart 的數量, 1. 第一個 csrf_token 是加載數據的post 請求頭 #}
            {% csrf_token %}
            <ul class="insert_cart_goods" id="insert_cart_goods">
                {#  2. 刪除數據 的請求頭 #}
                {% csrf_token %}
            </ul>
        </div>
    </div>
    <!--   結帳  -->
    <div id="buy_goods" style="display: none">
        <button><a href="/shop_cart">Checkout</a></button>
    </div>
    <!-- user cart-list  open and close       -->
    <div class="open-close">
        <span class="open-triangle"></span>
    </div>
</div>
<!-- user-cart-box , Your cart 樣式   ==================end===============   -->


<!--  =======商品內容 begin======= -->
<div id="goods">
        {# 以透過 ajax 向後端請求數據 將Woman 數據遍歷(Women 所有商品 遍歷) 然後加載到 頁面上#}
        <!-- ======================New_Arrival========================-->
{#        <ul id="New_Arrival">#}
{#        <!--  New Arrival  商品-->#}
{#        <!--     商品 1            -->#}
{#            <li>#}
{#                <p>#}
{#                    <a href="shop_goods_detail.html">#}
{#                        <img src="/static/images/woman_new_arrival_1.png">#}
{#                    </a>#}
{#                </p>#}
{#                <!--  設置商品敘述內容 div id="content" -->#}
{#                <div class="content">#}
{#                <!-- 添加商品點擊添加進購物車連接                   -->#}
{#                    <a href="#">#}
{#                        <img src="/static/images/shopingcart1.png">#}
{#                    </a>#}
{#                    <!-- 設置愛心樣式                   -->#}
{#                    <div class="heart">#}
{#                        <span class="heart1"></span>#}
{#                        <span class="heart2"></span>#}
{#                    </div>#}
{#                    <p class="good_desc">#}
{#                        <b>Mid Rise Boyfriend Jeans</b>#}
{#                    </p>#}
{#                    <span class="good_price">NT$:2,560</span>#}
{#                </div>#}
{#            </li>#}
<!--  =======商品內容 end ======= -->
</div>
<hr>
{#  1.透過 ajax 將商品的數據 將 Women 所有商品呈現在頁面上  #}
<script type="text/javascript">
    {# load 所有的 商品數據資訊    #}
    function load_all_goods_data() {
        var show_women = '';
        show_women += '<ul>';
        {#設置同步 等數據加載完才將數據存入 boday 中#}
        $.get('/Women/ajax_woman_goods_info',{'GOODS':'ALL_GOODS'},function (data) {
            {# 引用 common.js 中設置 的 load_goods_template 函數 將 $.get 到的資料 傳參 做處理#}
            show_women += load_goods_template(JSON.parse(data.goods_msg));
            show_women += '</ul>'
            $('#goods').html(show_women);
        },'json')
    }

    {# 點擊 /Women 加載 商品頁面資料#}
    load_all_goods_data()


{# 2.根據用戶點擊查詢,做不同的頁面數據呈現   #}
{# 設置New_arrival_goods_list 變量來,將後續點擊的數據,做頁面呈現(coat...等)#}
    var New_arrival_goods_list = [];
{#  1. New_arrival 項目所有商品  #}
    function New_arrival() {
        var show_women = '';
        show_women += '<ul>'
        $.get('/Women/ajax_woman_goods_info',{'GOODS':'New_Arrival'},function (data) {
            New_arrival_goods_list = data;

            let goods_msg_json = JSON.parse(data.goods_msg)
            show_women += load_goods_template(goods_msg_json)
            show_women += '</ul>'
            $('#goods').html(show_women);
            $('#goods_title a').text("Women's" + ' > New Arrival')

            {# 根據 login 登入狀態,來改變追蹤清單顯示狀態#}
            if(data.login_status==1){
            {# 將 login 的 追蹤清單訊息載入#}
                setTimeout(function () {
                    track_goods_msg(data.login_track_goods)
                },50)
            }
        },'json')
    }

{#  1.2 根據 New_arrival 點擊底下商品 顯示 #}
    $('#New_arrival_click_chirdren ul li a').click(function () {
        var show_women = '';
        show_women += '<ul>';
        let new_arrival_goods_msg_json = JSON.parse(New_arrival_goods_list.goods_msg)
        {# 點擊 子列表 'Coats' & Jackets #}
        if($(this).text()=='Coats & Jackets'){
            $.each(new_arrival_goods_msg_json,function (index,obj) {
                if (obj.fields.GoodsType2==1){
                    show_women += load_goods_chirdren_template(obj);
                }
            })
        }else if($(this).text()=='Clothes'){
            $.each(new_arrival_goods_msg_json,function (index,obj) {
                if(obj.fields.GoodsType2==2){
                   show_women += load_goods_chirdren_template(obj);
                }
            })
        }else if($(this).text()=='Trousers'){
            $.each(new_arrival_goods_msg_json,function (index,obj) {
                if(obj.fields.GoodsType2==3){
                   show_women += load_goods_chirdren_template(obj);
                }
            })
        }else if($(this).text()=='Blouse'){
            $.each(new_arrival_goods_msg_json,function (index,obj) {
                if(obj.fields.GoodsType2=='4'){
                    show_women += load_goods_chirdren_template(obj);
                }
            })
        }
        show_women += '</ul>'
        $('#goods').html(show_women);

        if(New_arrival_goods_list.login_status==1){
                setTimeout(function () {
                track_goods_msg(New_arrival_goods_list.login_track_goods);
            },50)
        }
    })


{#======================================================================================#}

{#  2. Top 項目的所有商品 #}
    {# 設置Tops_goods_list 變量來,將後續點擊的數據,做頁面呈現(coat...等)#}
    var Top_goods_list = [];
    function Top() {
        var show_women = ''
        show_women += '<ul>'
        $.get('/Women/ajax_woman_goods_info',{'GOODS':'Top'},function (data) {
            Top_goods_list = data;
            let goods_msg_json = JSON.parse(data.goods_msg)
            show_women += load_goods_template(goods_msg_json);
            show_women += '</ul>'
            $('#goods').html(show_women);
            $('#goods_title a').text("Women's" + '> Top');

            {# 根據 login 登入狀態,來改變追蹤清單顯示狀態#}
            if(data.login_status==1){
            {# 將 login 的 追蹤清單訊息載入#}
                setTimeout(function () {
                    track_goods_msg(data.login_track_goods)
                },50)
            }

        },'json')
    }
{#  2.1 根據 Top  點擊底下商品 顯示 #}
    $('#Top_click_chirdren ul li a').click(function () {
        var show_women = '';
        show_women += '<ul>';

        let Top_goods_msg_json = JSON.parse(Top_goods_list.goods_msg)

        {# 點擊 子列表 'Coats' & Jackets #}
        if($(this).text()=='Coats & Jackets'){
            $.each(Top_goods_msg_json,function (index,obj) {
                if (obj.fields.GoodsType2==1){
                    show_women += load_goods_chirdren_template(obj);
                }
            })
        }else if($(this).text()=='Clothes'){
            $.each(Top_goods_msg_json,function (index,obj) {
                if(obj.fields.GoodsType2==2){
                    show_women += load_goods_chirdren_template(obj);
                }
            })
        }else if($(this).text()=='Trousers'){
            $.each(Top_goods_msg_json,function (index,obj) {
                if(obj.fields.GoodsType2==3){
                    show_women += load_goods_chirdren_template(obj);
                }
            })
        }else if($(this).text()=='Blouse'){
            $.each(Top_goods_msg_json,function (index,obj) {
                if(obj.fields.GoodsType2=='4'){
                    show_women += load_goods_chirdren_template(obj);
                }
            })
        }
        show_women += '</ul>'
        $('#goods').html(show_women);

        {# 根據登入顯示 愛心資訊   #}
        {# 根據 login 登入狀態,來改變追蹤清單顯示狀態#}
        if(Top_goods_list.login_status==1){
        {# 將 login 的 追蹤清單訊息載入#}
            setTimeout(function () {
                track_goods_msg(Top_goods_list.login_track_goods)
            },50)
        }
    })

{#============================================================================#}

{#處理 其他商品 (除了新品和熱門商品的商品) #}

    {# 3. Coats_Jaskets  #}
    function Coats_Jackets() {
        var show_women = ''
        show_women += '<ul>'
        $.get('/Women/ajax_woman_goods_info',{'GOODS':'Coat_Jackets'},function (data) {
            let Coats_Jackets_msg_json = JSON.parse(data.goods_msg)
            show_women += load_goods_template(Coats_Jackets_msg_json);
            show_women += '</ul>'
            $('#goods').html(show_women);

            {# 根據 login 登入狀態,來改變追蹤清單顯示狀態#}
            if(data.login_status==1){
            {# 將 login 的 追蹤清單訊息載入#}
                setTimeout(function () {
                    track_goods_msg(data.login_track_goods)
                },50)
            }
        },'json')
        $('#goods_title a').text("Women's" + ' > Coats & Jackets');

    }

    {# 4. Clothes#}
    function Clothes() {
        var show_women = ''
        show_women += '<ul>'
        $.get('/Women/ajax_woman_goods_info',{'GOODS':'Clothes'},function (data) {
            let Clothes_msg_json = JSON.parse(data.goods_msg);
            show_women += load_goods_template(Clothes_msg_json);
            show_women += '</ul>'
            $('#goods').html(show_women);

            {# 根據 login 登入狀態,來改變追蹤清單顯示狀態#}
            if(data.login_status==1){
            {# 將 login 的 追蹤清單訊息載入#}
                setTimeout(function () {
                    track_goods_msg(data.login_track_goods)
                },50)
            }
        },'json')
        $('#goods_title a').text("Women's" + ' > Clothes');
    }

    {# 5. Trousers #}
    function Trousers() {
        var show_women = ''
        show_women += '<ul>'
        $.get('/Women/ajax_woman_goods_info',{'GOODS':'Trousers'},function (data) {
            let Trousers_msg_json = JSON.parse(data.goods_msg);
            show_women += load_goods_template(Trousers_msg_json);
            show_women += '</ul>'
            $('#goods').html(show_women);


            {# 根據 login 登入狀態,來改變追蹤清單顯示狀態#}
            if(data.login_status==1){
            {# 將 login 的 追蹤清單訊息載入#}
                setTimeout(function () {
                    track_goods_msg(data.login_track_goods)
                },50)
            }
        },'json')
        $('#goods_title a').text("Women's" + ' > Trousers');
    }

    {# 6. Blouse #}
    function Blouse() {
        var show_women = ''
        show_women += '<ul>'
        $.get('/Women/ajax_woman_goods_info',{'GOODS':'Blouse'},function (data) {
            let Blouse_msg_json = JSON.parse(data.goods_msg);
            show_women += load_goods_template(Blouse_msg_json);
            show_women += '</ul>'
            $('#goods').html(show_women);


            {# 根據 login 登入狀態,來改變追蹤清單顯示狀態#}
            if(data.login_status==1){
            {# 將 login 的 追蹤清單訊息載入#}
                setTimeout(function () {
                    track_goods_msg(data.login_track_goods)
                },50)
            }
        },'json')
        $('#goods_title a').text("Women's" + ' > Trousers');
    }

{#===========================================================================#}

{# 加載 用戶購物車商品數據   #}
    load_user_cart_data()

{# 點擊 清除 跳轉回 /Women 首頁#}
{#  重新整理頁面  #}
    function clear_filter() {
        location.href = '/Women'
    }
</script>
{% endblock %}

